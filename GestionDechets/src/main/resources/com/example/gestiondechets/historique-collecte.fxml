<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.shape.Circle?>

<AnchorPane prefHeight="700.0" prefWidth="1200.0" style="-fx-background-color: #f5f5f5;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.gestiondechets.HistoriqueCollectesController">

    <!-- Menu latÃ©ral -->
    <AnchorPane prefWidth="220.0" style="-fx-background-color: #006666;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="0.0">

        <!-- En-tÃªte profil -->
        <Circle fill="white" radius="40.0" AnchorPane.leftAnchor="70.0" AnchorPane.topAnchor="40.0" />
        <Label style="-fx-font-size: 32px;" text="ðŸš›" AnchorPane.leftAnchor="90.0" AnchorPane.topAnchor="60.0" />

        <Label fx:id="nomAgentCollecteurLabel" prefHeight="30.0" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-alignment: CENTER;" text="Agent Collecteur" wrapText="true" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="130.0" />

        <Separator prefWidth="180.0" style="-fx-background-color: rgba(255,255,255,0.3);" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="170.0" />

        <!-- Menu navigation -->
        <Button onAction="#retourDashboard" prefHeight="40.0" style="-fx-background-color: #27ae60; -fx-background-radius: 5; -fx-text-fill: white; -fx-font-size: 14px;" text="â† Retour" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="190.0">
            <padding>
                <Insets left="15.0" />
            </padding>
        </Button>

        <Button onAction="#effectuerNouvelleCollecte" prefHeight="40.0" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: CENTER_LEFT;" text="+ Nouvelle Collecte" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="240.0">
            <padding>
                <Insets left="15.0" />
            </padding>
        </Button>

        <Button onAction="#historiqueCollectes" prefHeight="40.0" style="-fx-background-color: #27ae60; -fx-background-radius: 5; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: CENTER_LEFT;" text="Historique" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="290.0">
            <padding>
                <Insets left="15.0" />
            </padding>
        </Button>

        <!-- DÃ©connexion -->
        <Button onAction="#handleLogout" prefHeight="35.0" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-border-radius: 5; -fx-border-color: white;" text="DÃ©connexion" AnchorPane.bottomAnchor="20.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" />

    </AnchorPane>

    <!-- Contenu principal -->
    <AnchorPane AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="220.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">

        <!-- Header -->
        <Label style="-fx-text-fill: #006666; -fx-font-size: 28px; -fx-font-weight: bold;" text="Historique des Collectes" AnchorPane.leftAnchor="30.0" AnchorPane.topAnchor="30.0" />

        <!-- Tableau des collectes -->
        <AnchorPane layoutY="79.0" prefHeight="591.0" prefWidth="920.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.bottomAnchor="30.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="79.0">

            <!-- En-tÃªte du tableau -->
            <Label style="-fx-text-fill: #006666; -fx-font-size: 18px; -fx-font-weight: bold;" text="Liste des Collectes" AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0" />

            <Label fx:id="nombreResultatsLabel" style="-fx-text-fill: #7f8c8d; -fx-font-size: 12px;" text="0 collectes trouvÃ©es" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="25.0" />

            <!-- TableView -->
            <TableView fx:id="collectesTableView" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="60.0">
                <columns>
                    <!-- ID Collecte -->
                    <TableColumn fx:id="idColonne" prefWidth="80" text="ID">
                        <cellValueFactory>
                            <PropertyValueFactory property="idCollecte" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- ID Intervention -->
                    <TableColumn fx:id="idInterventionColonne" prefWidth="100" text="ID Intervention">
                        <cellValueFactory>
                            <PropertyValueFactory property="idIntervention" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Adresse -->
                    <TableColumn fx:id="adresseColonne" prefWidth="200" text="Adresse">
                        <cellValueFactory>
                            <PropertyValueFactory property="adresse" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Date Collecte -->
                    <TableColumn fx:id="dateColonne" prefWidth="120" text="Date Collecte">
                        <cellValueFactory>
                            <PropertyValueFactory property="dateCollecte" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- QuantitÃ© -->
                    <TableColumn fx:id="quantiteColonne" prefWidth="100" text="QuantitÃ© (kg)">
                        <cellValueFactory>
                            <PropertyValueFactory property="quantiteCollectee" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Statut -->
                    <TableColumn fx:id="statutColonne" prefWidth="100" text="Statut">
                        <cellValueFactory>
                            <PropertyValueFactory property="statut" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Agent -->
                    <TableColumn fx:id="agentColonne" prefWidth="150" text="Agent Collecteur">
                        <cellValueFactory>
                            <PropertyValueFactory property="nomAgent" />
                        </cellValueFactory>
                    </TableColumn>

                    <!-- Actions -->
                    <TableColumn fx:id="actionsColonne" prefWidth="120" text="Actions">
                        <cellValueFactory>
                            <PropertyValueFactory property="actions" />
                        </cellValueFactory>
                    </TableColumn>
                </columns>
            </TableView>

            <!-- Boutons d'action en bas -->
            <Button fx:id="voirDetailsBtn" disable="true" layoutX="20.0" layoutY="533.0" onAction="#voirDetailsCollecte" prefHeight="35.0" prefWidth="140.0" style="-fx-background-color: #3498db; -fx-text-fill: white;" text="Voir DÃ©tails" AnchorPane.bottomAnchor="23.0" AnchorPane.leftAnchor="20.0">
                <tooltip>
                    <Tooltip text="Voir les dÃ©tails de la collecte sÃ©lectionnÃ©e" />
                </tooltip>
            </Button>

            <Button fx:id="supprimerBtn" disable="true" layoutX="181.0" layoutY="533.0" onAction="#supprimerCollecte" prefHeight="35.0" prefWidth="140.0" style="-fx-background-color: #e74c3c; -fx-text-fill: white;" text="Supprimer" AnchorPane.bottomAnchor="23.0" AnchorPane.leftAnchor="181.0">
                <tooltip>
                    <Tooltip text="Supprimer la collecte sÃ©lectionnÃ©e" />
                </tooltip>
            </Button>

            <!-- Message d'information -->
            <Label fx:id="messageLabel" style="-fx-font-size: 14px;" wrapText="true" AnchorPane.bottomAnchor="110.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" />

        </AnchorPane>

    </AnchorPane>

</AnchorPane>
