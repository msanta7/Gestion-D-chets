<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.shape.Rectangle?>

<AnchorPane fx:id="adminRoot" prefHeight="700.0" prefWidth="1200.0" style="-fx-background-color: #f5f5f5;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.gestiondechets.GestUsers">

    <!-- Menu latéral -->
    <AnchorPane prefHeight="700.0" prefWidth="250" style="-fx-background-color: #006666;" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.topAnchor="0.0">

        <!-- Admin label -->
        <Label fx:id="userNameLabel" style="-fx-text-fill: white; -fx-font-size: 14px;" text="Admin : " AnchorPane.leftAnchor="45" AnchorPane.topAnchor="27" />

        <!-- Accueil -->
        <Button fx:id="dashboardBtn" layoutY="97.0" onAction="#showDashboard" prefHeight="50" prefWidth="250" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: center-left; -fx-cursor: hand;" text="Acceuil" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="97.0">
            <padding>
                <Insets left="20" />
            </padding>
            <contentDisplay>LEFT</contentDisplay>
        </Button>

        <!-- Signalements -->
        <Button fx:id="signalementsBtn" layoutY="167.0" onAction="#showSignalements" prefHeight="50" prefWidth="250" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: center-left; -fx-cursor: hand;" text="Signalements" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="167.0">
            <padding>
                <Insets left="20" />
            </padding>
            <contentDisplay>LEFT</contentDisplay>
        </Button>

        <!-- Utilisateurs -->
        <Button fx:id="usersBtn" layoutY="235.0" onAction="#showUsers" prefHeight="50" prefWidth="250" style="-fx-background-color: #34495e; -fx-border-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: center-left; -fx-cursor: hand;" text="Gestion des utilisateurs" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="235.0">
            <padding>
                <Insets left="20" />
            </padding>
            <contentDisplay>LEFT</contentDisplay>
        </Button>

        <!-- Rapports -->
        <Button fx:id="reportsBtn" layoutY="303.0" onAction="#showReports" prefHeight="50" prefWidth="250" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: center-left; -fx-cursor: hand;" text="Rapports" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="303.0">
            <padding>
                <Insets left="20" />
            </padding>
            <contentDisplay>LEFT</contentDisplay>
        </Button>

        <!-- Paramètres -->
        <Button fx:id="settingsBtn" layoutY="375.0" onAction="#showSettings" prefHeight="50" prefWidth="250" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-alignment: center-left; -fx-cursor: hand;" text="Paramétres" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="375.0">
            <padding>
                <Insets left="20" />
            </padding>
            <contentDisplay>LEFT</contentDisplay>
        </Button>

        <!-- Bouton Déconnexion -->
        <Button layoutY="596.0" onAction="#handleLogout" prefHeight="30.0" prefWidth="105.0" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-border-radius: 5; -fx-border-color: white;" text="Déconnexion" AnchorPane.bottomAnchor="74" AnchorPane.leftAnchor="64" />

        <!-- Copyright -->
        <Label alignment="CENTER" style="-fx-text-fill: #7f8c8d; -fx-font-size: 11px;" text="© 2025 Gestion de Déchets" AnchorPane.bottomAnchor="20" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" />

    </AnchorPane>

    <!-- Contenu principal - Gestion des utilisateurs -->
    <AnchorPane layoutX="250.0" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="250.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">

        <!-- En-tête de la page -->
        <Label layoutX="30.0" layoutY="20.0" style="-fx-text-fill: #006666; -fx-font-size: 24px; -fx-font-weight: bold;" text="GESTION DES UTILISATEURS" AnchorPane.leftAnchor="30.0" AnchorPane.topAnchor="20.0" />

        <!-- Statistiques -->
        <AnchorPane prefHeight="80" prefWidth="180" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.leftAnchor="30" AnchorPane.topAnchor="70">
            <Rectangle arcHeight="5.0" arcWidth="5.0" fill="#3498db" height="5.0" width="180.0" AnchorPane.leftAnchor="0" AnchorPane.topAnchor="0" />
            <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 12px;" text="Total Utilisateurs" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="20" />
            <Label fx:id="totalUsersLabel" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="40" />
        </AnchorPane>

        <AnchorPane prefHeight="80" prefWidth="180" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.leftAnchor="230" AnchorPane.topAnchor="70">
            <Rectangle arcHeight="5.0" arcWidth="5.0" fill="#2ecc71" height="5.0" width="180.0" AnchorPane.leftAnchor="0" AnchorPane.topAnchor="0" />
            <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 12px;" text="Actifs" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="20" />
            <Label fx:id="activeUsersLabel" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="40" />
        </AnchorPane>

        <AnchorPane prefHeight="80" prefWidth="180" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.leftAnchor="430" AnchorPane.topAnchor="70">
            <Rectangle arcHeight="5.0" arcWidth="5.0" fill="#e74c3c" height="5.0" width="180.0" AnchorPane.leftAnchor="0" AnchorPane.topAnchor="0" />
            <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 12px;" text="Nouveaux" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="20" />
            <Label fx:id="newUsersLabel" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="40" />
        </AnchorPane>

        <!-- Barre d'outils -->
        <AnchorPane prefHeight="100" style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.leftAnchor="30" AnchorPane.rightAnchor="30" AnchorPane.topAnchor="170">

            <Label style="-fx-text-fill: #2c3e50; -fx-font-size: 16px; -fx-font-weight: bold;" text="Gestion des utilisateurs" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="20" />

            <Button layoutX="20.0" layoutY="55.0" onAction="#openAddUserDialog" prefHeight="35" prefWidth="150" style="-fx-background-color: #006666; -fx-text-fill: white; -fx-background-radius: 5;" text="+ Nouvel utilisateur" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="55" />

            <TextField fx:id="searchField" layoutX="200.0" layoutY="55.0" prefHeight="35" prefWidth="200" promptText="Rechercher..." AnchorPane.leftAnchor="200" AnchorPane.topAnchor="55" />

            <ComboBox fx:id="roleFilter" layoutX="420.0" layoutY="55.0" prefHeight="35" prefWidth="120" promptText="Rôle" AnchorPane.leftAnchor="420" AnchorPane.topAnchor="55">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="Tous" />
                        <String fx:value="Citoyen" />
                        <String fx:value="Conducteur" />
                        <String fx:value="Agent" />
                        <String fx:value="Admin" />
                    </FXCollections>
                </items>
            </ComboBox>

            <ComboBox fx:id="statusFilter" layoutX="560.0" layoutY="55.0" prefHeight="35" prefWidth="120" promptText="Statut" AnchorPane.leftAnchor="560" AnchorPane.topAnchor="55">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="Tous" />
                        <String fx:value="Actif" />
                        <String fx:value="Inactif" />
                    </FXCollections>
                </items>
            </ComboBox>

            <Button layoutX="700.0" layoutY="55.0" onAction="#applyFilters" prefHeight="35" prefWidth="80" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 5;" text="Filtrer" AnchorPane.rightAnchor="20" AnchorPane.topAnchor="55" />

        </AnchorPane>

        <!-- Tableau des utilisateurs -->
        <AnchorPane style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" AnchorPane.bottomAnchor="40.0" AnchorPane.leftAnchor="30" AnchorPane.rightAnchor="30" AnchorPane.topAnchor="290">

            <Label style="-fx-text-fill: #2c3e50; -fx-font-size: 18px; -fx-font-weight: bold;" text="Liste des utilisateurs" AnchorPane.leftAnchor="20" AnchorPane.topAnchor="20" />

            <TableView fx:id="usersTable" AnchorPane.bottomAnchor="80" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.topAnchor="60">
                <columns>
                    <TableColumn prefWidth="50" text="ID" />
                    <TableColumn prefWidth="167.0" text="Nom complet" />
                    <TableColumn prefWidth="167.0" text="Téléphone" />
                    <TableColumn prefWidth="133.0" text="Rôle" />
                    <TableColumn prefWidth="153.0" text="Date création" />
                    <TableColumn prefWidth="179.0" text="Actions" />
                </columns>
            </TableView>


        </AnchorPane>

    </AnchorPane>

</AnchorPane>
